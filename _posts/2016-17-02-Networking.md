---
layout: post
title: Сеть
---

# Сеть

## Модель OSI
7. Прикладной
6. Уровень Представления
5. Сеансовый - TCP (проверка ошибок на уровне протокола)
4. Транспортный \
3. Сетевой ------ IP
2. Канальный (Ethernet, PPP, 802.11<буква>)
1. Физический (модуляция сигнала)

## Настройки

### IP-адрес
32 бита (IPv4)  
192.168.1.1

### Маска сети
255.255.0.0 = 16 единиц, 16 нулей.  
/16

IP & Mask - адрес сети (логическое И)  
192.168.1.1 & 255.255.0.0 = 192.168.0.0

Broadcast - Net | ~Mask  
192.168.0.0 | 0.0.255.255 = 192.168.255.255  
Адрес, который не принадлежит ни одному устройству и 
слушается сразу всеми адаптерами сети.

10.40.16.137 | 31 = 0x1F  
137 = 0x89  
      0x1F = 0x9F = 159
      
ifconfig - настройка сетевых интерфейсов  
eth0..ethN  
eth0:2 - расщепленный интерфейс (для нескольких ip)  
wl0 - wireless interface

ifconfig eth0 192.168.1.1 netmask 255.255.0.0  
ifconfig eth0 add 192.168.1.1 netmask 255.255.0.0 - 
  расщепить интерфейс
  
ifconfig eth0 down, ifconfig eth0 up  
ifdown eth0, ifup eth0 - если сконфигурирован в
 /etc/network/interfaces

Если в сети есть DHCP-сервер, то можно брать настройки
 с него.  
dhclient eth0 - настроить eth0 по dhcp

### Шлюз
Устройство, через которое мы ходим в другие сегменты.  
route add default gw 192.168.1.1 - настройка 
  шлюза по-умолчанию
  
### Loopback-интерфейс
lo, 127.0.0.1 - локальный интерфейс, доступный только
  с устройства, на котором он существует
  
## Конфигурация сети через файлы
/etc/network/interfaces
/etc/NetworkManager

## Диагностика сети
ping - ICMP request/response  
traceroute - ICMP request с инкрементируемым TTL  
tcpdump - сниффер  
wireshark - GUI сниффер

## Commandline sockets

nc - открывает клиентские и серверные сокеты

# Практика.
1. Написать свой traceroute на bash
2. Переделать угадайку на клиент-сервер
